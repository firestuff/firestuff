<!--# set var="title" value="apt caching for debootstrap" -->
<!--# set var="date" value="April 2, 2016" -->

<!--# include file="include/top.html" -->

<p>If you’re building system images, you’re going to do a lot of debootstrap, which is going to fetch a lot of packages. On a fast system, that’ll be the slowest part of the process. Here’s how to cache.</p>

<h3>Install apt-cacher-ng</h3>

<pre><code>sudo apt-get install squid-deb-proxy
</code></pre>

<h3>Tell programs to use the proxy</h3>

<pre><code>export http_proxy=http://127.0.0.1:8000
# Note that you'll need to re-export this before any use of debootstrap
</code></pre>

<h3>Tell sudo to pass through http_proxy</h3>

<pre><code>sudo visudo
# Add the line after the env_reset line:
Defaults env_keep += "http_proxy"
</code></pre>

<!--# include file="include/bottom.html" -->
